{"ast":null,"code":"var PersistedDataFactory = function () {\n  function PersistedDataFactory() {}\n  PersistedDataFactory.createDefault = function () {\n    return {\n      hasPermission: false,\n      lastUsedCameraId: null\n    };\n  };\n  return PersistedDataFactory;\n}();\nvar PersistedDataManager = function () {\n  function PersistedDataManager() {\n    this.data = PersistedDataFactory.createDefault();\n    var data = localStorage.getItem(PersistedDataManager.LOCAL_STORAGE_KEY);\n    if (!data) {\n      this.reset();\n    } else {\n      this.data = JSON.parse(data);\n    }\n  }\n  PersistedDataManager.prototype.hasCameraPermissions = function () {\n    return this.data.hasPermission;\n  };\n  PersistedDataManager.prototype.getLastUsedCameraId = function () {\n    return this.data.lastUsedCameraId;\n  };\n  PersistedDataManager.prototype.setHasPermission = function (hasPermission) {\n    this.data.hasPermission = hasPermission;\n    this.flush();\n  };\n  PersistedDataManager.prototype.setLastUsedCameraId = function (lastUsedCameraId) {\n    this.data.lastUsedCameraId = lastUsedCameraId;\n    this.flush();\n  };\n  PersistedDataManager.prototype.resetLastUsedCameraId = function () {\n    this.data.lastUsedCameraId = null;\n    this.flush();\n  };\n  PersistedDataManager.prototype.reset = function () {\n    this.data = PersistedDataFactory.createDefault();\n    this.flush();\n  };\n  PersistedDataManager.prototype.flush = function () {\n    localStorage.setItem(PersistedDataManager.LOCAL_STORAGE_KEY, JSON.stringify(this.data));\n  };\n  PersistedDataManager.LOCAL_STORAGE_KEY = \"HTML5_QRCODE_DATA\";\n  return PersistedDataManager;\n}();\nexport { PersistedDataManager };","map":{"version":3,"names":["PersistedDataFactory","createDefault","hasPermission","lastUsedCameraId","PersistedDataManager","data","localStorage","getItem","LOCAL_STORAGE_KEY","reset","JSON","parse","prototype","hasCameraPermissions","getLastUsedCameraId","setHasPermission","flush","setLastUsedCameraId","resetLastUsedCameraId","setItem","stringify"],"sources":["../../src/storage.ts"],"sourcesContent":[null],"mappings":"AAeA,IAAAA,oBAAA;EAAA,SAAAA,qBAAA,GAOA;EANWA,oBAAA,CAAAC,aAAa,GAApB;IACI,OAAO;MACHC,aAAa,EAAE,KAAK;MACpBC,gBAAgB,EAAE;KACrB;EACL,CAAC;EACL,OAAAH,oBAAC;AAAD,CAAC,CAPD;AASA,IAAAI,oBAAA;EAKI,SAAAA,qBAAA;IAHQ,KAAAC,IAAI,GAAkBL,oBAAoB,CAACC,aAAa,EAAE;IAI9D,IAAII,IAAI,GAAGC,YAAY,CAACC,OAAO,CAACH,oBAAoB,CAACI,iBAAiB,CAAC;IACvE,IAAI,CAACH,IAAI,EAAE;MACP,IAAI,CAACI,KAAK,EAAE;KACf,MAAM;MACH,IAAI,CAACJ,IAAI,GAAGK,IAAI,CAACC,KAAK,CAACN,IAAI,CAAC;;EAEpC;EAEOD,oBAAA,CAAAQ,SAAA,CAAAC,oBAAoB,GAA3B;IACI,OAAO,IAAI,CAACR,IAAI,CAACH,aAAa;EAClC,CAAC;EAEME,oBAAA,CAAAQ,SAAA,CAAAE,mBAAmB,GAA1B;IACI,OAAO,IAAI,CAACT,IAAI,CAACF,gBAAgB;EACrC,CAAC;EAEMC,oBAAA,CAAAQ,SAAA,CAAAG,gBAAgB,GAAvB,UAAwBb,aAAsB;IAC1C,IAAI,CAACG,IAAI,CAACH,aAAa,GAAGA,aAAa;IACvC,IAAI,CAACc,KAAK,EAAE;EAChB,CAAC;EAEMZ,oBAAA,CAAAQ,SAAA,CAAAK,mBAAmB,GAA1B,UAA2Bd,gBAAwB;IAC/C,IAAI,CAACE,IAAI,CAACF,gBAAgB,GAAGA,gBAAgB;IAC7C,IAAI,CAACa,KAAK,EAAE;EAChB,CAAC;EAEMZ,oBAAA,CAAAQ,SAAA,CAAAM,qBAAqB,GAA5B;IACI,IAAI,CAACb,IAAI,CAACF,gBAAgB,GAAG,IAAI;IACjC,IAAI,CAACa,KAAK,EAAE;EAChB,CAAC;EAEMZ,oBAAA,CAAAQ,SAAA,CAAAH,KAAK,GAAZ;IACI,IAAI,CAACJ,IAAI,GAAGL,oBAAoB,CAACC,aAAa,EAAE;IAChD,IAAI,CAACe,KAAK,EAAE;EAChB,CAAC;EAEOZ,oBAAA,CAAAQ,SAAA,CAAAI,KAAK,GAAb;IACIV,YAAY,CAACa,OAAO,CAChBf,oBAAoB,CAACI,iBAAiB,EACtCE,IAAI,CAACU,SAAS,CAAC,IAAI,CAACf,IAAI,CAAC,CAAC;EAClC,CAAC;EA3CcD,oBAAA,CAAAI,iBAAiB,GAAW,mBAAmB;EA4ClE,OAAAJ,oBAAC;CAAA,CA/CD;SAAaA,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}