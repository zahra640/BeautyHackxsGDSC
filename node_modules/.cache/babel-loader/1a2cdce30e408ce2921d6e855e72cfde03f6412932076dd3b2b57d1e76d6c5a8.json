{"ast":null,"code":"export var Html5QrcodeScannerState;\n(function (Html5QrcodeScannerState) {\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"UNKNOWN\"] = 0] = \"UNKNOWN\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"NOT_STARTED\"] = 1] = \"NOT_STARTED\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"SCANNING\"] = 2] = \"SCANNING\";\n  Html5QrcodeScannerState[Html5QrcodeScannerState[\"PAUSED\"] = 3] = \"PAUSED\";\n})(Html5QrcodeScannerState || (Html5QrcodeScannerState = {}));\nvar StateManagerImpl = function () {\n  function StateManagerImpl() {\n    this.state = Html5QrcodeScannerState.NOT_STARTED;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  }\n  StateManagerImpl.prototype.directTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.state = newState;\n  };\n  StateManagerImpl.prototype.startTransition = function (newState) {\n    this.failIfTransitionOngoing();\n    this.validateTransition(newState);\n    this.onGoingTransactionNewState = newState;\n    return this;\n  };\n  StateManagerImpl.prototype.execute = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot execute().\";\n    }\n    var tempNewState = this.onGoingTransactionNewState;\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n    this.directTransition(tempNewState);\n  };\n  StateManagerImpl.prototype.cancel = function () {\n    if (this.onGoingTransactionNewState === Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Transaction is already cancelled, cannot cancel().\";\n    }\n    this.onGoingTransactionNewState = Html5QrcodeScannerState.UNKNOWN;\n  };\n  StateManagerImpl.prototype.getState = function () {\n    return this.state;\n  };\n  StateManagerImpl.prototype.failIfTransitionOngoing = function () {\n    if (this.onGoingTransactionNewState !== Html5QrcodeScannerState.UNKNOWN) {\n      throw \"Cannot transition to a new state, already under transition\";\n    }\n  };\n  StateManagerImpl.prototype.validateTransition = function (newState) {\n    switch (this.state) {\n      case Html5QrcodeScannerState.UNKNOWN:\n        throw \"Transition from unknown is not allowed\";\n      case Html5QrcodeScannerState.NOT_STARTED:\n        this.failIfNewStateIs(newState, [Html5QrcodeScannerState.PAUSED]);\n        break;\n      case Html5QrcodeScannerState.SCANNING:\n        break;\n      case Html5QrcodeScannerState.PAUSED:\n        break;\n    }\n  };\n  StateManagerImpl.prototype.failIfNewStateIs = function (newState, disallowedStatesToTransition) {\n    for (var _i = 0, disallowedStatesToTransition_1 = disallowedStatesToTransition; _i < disallowedStatesToTransition_1.length; _i++) {\n      var disallowedState = disallowedStatesToTransition_1[_i];\n      if (newState === disallowedState) {\n        throw \"Cannot transition from \".concat(this.state, \" to \").concat(newState);\n      }\n    }\n  };\n  return StateManagerImpl;\n}();\nvar StateManagerProxy = function () {\n  function StateManagerProxy(stateManager) {\n    this.stateManager = stateManager;\n  }\n  StateManagerProxy.prototype.startTransition = function (newState) {\n    return this.stateManager.startTransition(newState);\n  };\n  StateManagerProxy.prototype.directTransition = function (newState) {\n    this.stateManager.directTransition(newState);\n  };\n  StateManagerProxy.prototype.getState = function () {\n    return this.stateManager.getState();\n  };\n  StateManagerProxy.prototype.canScanFile = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.NOT_STARTED;\n  };\n  StateManagerProxy.prototype.isScanning = function () {\n    return this.stateManager.getState() !== Html5QrcodeScannerState.NOT_STARTED;\n  };\n  StateManagerProxy.prototype.isStrictlyScanning = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.SCANNING;\n  };\n  StateManagerProxy.prototype.isPaused = function () {\n    return this.stateManager.getState() === Html5QrcodeScannerState.PAUSED;\n  };\n  return StateManagerProxy;\n}();\nexport { StateManagerProxy };\nvar StateManagerFactory = function () {\n  function StateManagerFactory() {}\n  StateManagerFactory.create = function () {\n    return new StateManagerProxy(new StateManagerImpl());\n  };\n  return StateManagerFactory;\n}();\nexport { StateManagerFactory };","map":{"version":3,"names":["Html5QrcodeScannerState","StateManagerImpl","state","NOT_STARTED","onGoingTransactionNewState","UNKNOWN","prototype","directTransition","newState","failIfTransitionOngoing","validateTransition","startTransition","execute","tempNewState","cancel","getState","failIfNewStateIs","PAUSED","SCANNING","disallowedStatesToTransition","_i","disallowedStatesToTransition_1","length","disallowedState","concat","StateManagerProxy","stateManager","canScanFile","isScanning","isStrictlyScanning","isPaused","StateManagerFactory","create"],"sources":["../../src/state-manager.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}